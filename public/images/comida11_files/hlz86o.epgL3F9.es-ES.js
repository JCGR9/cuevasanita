(this.$WP=this.$WP||[]).push(["hlz86o",(e,t)=>{var l,i,a,r,n,s,o,d,c,f,u,m,b,h,_,v,p,g,y,w,S,C,A,N,R,E,L,M,I,k,x,O,W,T,B,G,F,P,V,D,z,j,Y,H,q,$,U,K,Z,Q,X,J,ee,et,el,ei,ea,er,en,es=({title:e,thumbnailSource:t,sizeHint:a,selected:r,onClick:n})=>l("button",{type:"button",onClick:n,className:"JYJOz Gi _S Wh",children:[i("div",{className:S("YjpDv",{"fGzmW Re z":r}),children:i(C,{roundingMode:"all",roundingSize:"medium",source:t,height:"100%",alt:e,sizeHint:a})}),i("div",{className:"Lxcbp",children:i(A,{atlasVariant:r?"fixed-label-20":"fixed-body-20",marginTop:"spacing-02",lineClamp:2,color:"onSurface",children:e})})]}),eo=()=>l("div",{className:"RlbWn",children:[i("div",{className:"njdDx",children:i(N,{height:"100%"})}),i("div",{className:"Mj",children:i(N,{width:"65%",height:"17px"})})]}),ed={albumContainer:"DvMLl _e Q2",albumItem:"F0"},ec=({albums:e,fetching:t,selectedAlbumSpecifier:l,onAlbumSelected:a})=>{var r=!t&&e.length?e.map(e=>e?.albumSpecifier&&e.thumbnail?.source&&e.count?i("div",{className:ed.albumItem,children:i(Z,{title:e.title||"",thumbnailSource:e.thumbnail.source,sizeHint:{mobile:"25vw",tablet:"15vw",desktop:"11vw"},onClick:()=>{e.albumSpecifier&&a?.(e.albumSpecifier)},selected:b(l,e.albumSpecifier)})},`item-${h(e.albumSpecifier)}`):null):t&&[,,,,].fill(null).map((e,t)=>i("div",{className:ed.albumItem,children:i(Q,{})},t))||null;return i("div",{className:ed.albumContainer,children:r})},ef={container:"jjPPF f w u",showAllPills:"hNtfM",pills:"BRNuY f K",seeAllButton:"CFZYs NM"},eu=(e,t)=>{var l=t-((e.button||0)+16);return e.pills.filter(Boolean).reduce((i,a)=>{var r=i.totalWidth+a+8;return{totalPills:r<=l||i.totalPills+1===e.pills.length&&r-8<=t?i.totalPills+1:i.totalPills,totalWidth:r}},{totalPills:0,totalWidth:0}).totalPills},em=({collapsible:e,selectorConfig:{options:t,onSelect:a,selected:c}})=>{var f=E(),{containerRef:u,pillsRef:m,buttonRef:h}=r({containerRef:n(),pillsRef:t.map(()=>n()),buttonRef:n()}).current,[_,v]=s(e),[p,g]=s(t.length),[y,w]=s({pills:t.map(()=>null),button:null}),C=o(()=>{if(!e){var t=eu(y,u.current?.offsetWidth||0);y.pills.some(Boolean)&&g(t)}},[e,y,u]);d(()=>{!e&&m.some(e=>e.current?.offsetWidth)&&y.pills.length&&y.pills.every(e=>null===e)&&w({pills:m.map(e=>e.current?.offsetWidth||0),button:h.current?.offsetWidth||0}),C()},[e,m,h,h.current?.offsetWidth,y,C]);var A=!y.button||p!==t.length;return l("div",{className:S(ef.container,{[ef.showAllPills]:_}),ref:u,"data-testid":"pills",children:[i(F,{callback:C,throttle:100}),i("div",{className:ef.pills,children:t.slice(0,_?t.length:p).map(({label:e,value:t},l)=>i("div",{ref:m[l],"data-testid":"pill",children:i(G,{selected:b(t,c),onClick:()=>a(t,"GALLERY_VIEWER"),children:i(R,{id:"airm_geo_fffff486",args:{0:e.name,1:e.count?f.formatNumber("integer",e.count):void 0},messages:"{0} ({1})"})})},e.name))}),!e&&A&&i("div",{className:S(ef.seeAllButton,{[ef.showAllPills]:_}),ref:h,children:i(W,{icon:_?B:T,trailing:!0,variant:"primary-small",onClick:()=>v(!_),children:_?i(R,{id:"mv_hide_filters",messages:"Ocultar filtros"}):i(R,{id:"mv_see_all_filters",messages:"Ver todos los filtros"})})})]})},eb=(e,t)=>{switch(t){case _.allUnrestricted:case _.allIncludingRestricted:return e.string("todo el mundo","mv_photos_from_everyone");case _.traveler:return e.string("viajeros","mv_photos_from_travelers");case _.staff:return e.string("profesionales","mv_photos_from_professionals");case _.management:return e.string("la dirección","mv_photos_from_management");default:return t||""}},eh=(e,t,l,i)=>e.string("De: {source} ({count})","mg_from_with_source_count",{source:eb(e,l),count:t.formatNumber("integer",i||0)}),e_=(e,t)=>{switch(t){case"featured":return e.string("Destacadas","hr_mediaviewer_filter_by_featured");case"recency":return e.string("Recientes","hr_mediaviewer_filter_by_recency");default:return t}},ev={divider:"mbZgu",chips:"pgZiU f k",sorting:"OvmHR",tabs:"xGcnX"},ep=({sourceControl:e,subAlbumControl:t,sortControl:r,fetching:n})=>{var s=t.options.map(({label:e})=>e.name.length).join(""),{localize:o}=L(),d=E();return l("div",{"data-testid":"header_controller",children:[i("div",{className:ev.tabs,children:!n&&e.options.length&&l(a,{children:[i(k,{value:e.selected,onChange:t=>e.onSelect(t,"GALLERY_VIEWER"),children:e.options.map(({label:{name:e,count:t},value:l})=>i(x,{value:l,children:eh(o,d,e,t)},e))}),i("div",{className:ev.divider,children:i(M,{})})]})||n&&i(N,{width:"40%",height:"37px"})||null}),l("div",{className:ev.chips,children:[!n&&t.options.length&&i(J,{selectorConfig:t},s)||n&&i(N,{width:"20%",height:"35px"})||null,r&&i("div",{className:ev.sorting,children:i(I,{mode:"select",trigger:"chip",label:o.string("Ordenar por","hr_mediaviewer_sort_by_label"),menuVariant:"trailing-top-caret",value:r.selected,options:r.options.map(({label:e,value:t})=>({displayName:e_(o,e.name),value:t})),onChange:e=>r.onSelect(e,"GALLERY_VIEWER")})})]})]})},eg=({closeModal:e,onReset:t,onClose:a,sourceControl:r,subAlbumControl:n})=>{var{localize:s}=L(),o=E();return l(D,{"data-testid":"filters_modal",variant:"fixed-height-sticky-footer",onClose:()=>{e(),a("FILTER_MODAL")},title:i(R,{id:"gallery_controller_filters",messages:"Filtros"}),buttonsAlignment:"space-between",secondaryButton:l(W,{onClick:()=>{t(),e()},children:[i(R,{id:"media_viewer_mobile_filter_reset",messages:"Restablecer"})," "]}),primaryButton:l(O,{onClick:()=>{r.onSelect(r.selected,"GALLERY_VIEWER"),n.onSelect(n.selected,"GALLERY_VIEWER"),e()},children:[i(R,{id:"h_show_results",messages:"Ver resultados"})," "]}),children:[l(A,{atlasVariant:"fixed-title-10",marginTop:"spacing-04",marginBottom:"spacing-03",color:"onSurface",children:[i(R,{id:"mv_mw_filter_source_section_header",messages:"Fuente"})," "]}),i(z,{name:"sources",children:r.options.map(e=>i(j,{value:e.value,selected:e.value===r.selected,onSelect:e=>{r.onSelect(e,"FILTER_MODAL")},label:eh(s,o,e.label.name,e.label.count)},e.label.name))}),l(A,{atlasVariant:"fixed-title-10",marginTop:"spacing-06",marginBottom:"spacing-03",color:"onSurface",children:[i(R,{id:"mv_mw_filter_category_section_header",messages:"Categoría"})," "]}),i(J,{collapsible:!0,selectorConfig:{...n,selected:n.selected,onSelect:e=>{n.onSelect(e,"FILTER_MODAL")}}})]})},ey=({closeModal:e,onClose:t,sortControl:a,selected:r,onSelection:n})=>{var{localize:s}=L();return i(D,{"data-testid":"sort_modal",variant:"fixed-height-sticky-footer",title:i(R,{id:"hr_mediaviewer_sort_by_label",messages:"Ordenar por"}),onClose:()=>{e(),t("SORT_MODAL")},buttonsAlignment:"space-between",primaryButton:l(O,{onClick:()=>{a.onSelect(r,"GALLERY_VIEWER"),e(),t("SORT_MODAL")},children:[i(R,{id:"h_show_results",messages:"Ver resultados"})," "]}),children:i(z,{name:"Sort",children:a.options.map(e=>i(j,{value:e.value,selected:e.value===r,onSelect:e=>n("sortOption",e),label:e_(s,e.label.name)},e.label.name))})})},ew="filters",eS="sortBy",eC=({sourceControl:e,subAlbumControl:t,sortControl:a,onReset:r,onClose:n})=>{var[o,d]=s(null),c={source:e.selected,subAlbum:t.selected,sortOption:a?a.selected:""},[f,u]=s(c),m=(e,t)=>u(l=>({...l,[e]:t})),b=()=>d(null);return l("div",{"data-testid":"modal_controller",children:[l("div",{className:"f k Ma Nl MA NN",children:[l(W,{"data-testid":"filters_button",icon:P,onClick:()=>{d(()=>(u(c),ew))},children:[i(R,{id:"media_viewer_mobile_filter_menu_button",messages:"Filtrar"})," "]}),l(W,{"data-testid":"sort_button",icon:V,onClick:()=>{d(()=>(u(c),eS))},children:[i(R,{id:"media_viewer_mobile_sort_menu_button",messages:"Ordenar"})," "]})]}),(l=>{switch(l){case ew:return i(et,{closeModal:b,onClose:n,onReset:r,sourceControl:e,subAlbumControl:t});case eS:if(a)return i(el,{closeModal:b,onClose:n,sortControl:a,selected:f.sortOption,onSelection:m});return null;default:return null}})(o)]})},eA=({headerLabel:e,sourceControl:t,subAlbumControl:r,sortControl:n,albumsFetching:s,subAlbumsFetching:o,onReset:d,onClose:c})=>{var f="MOBILE"===u(),m=E();return l(a,{children:[i("div",{className:"uCgNk","data-testid":"header_label",children:i(A,{atlasVariant:f?"fixed-title-10":"fixed-title-20",children:!s&&e.name&&e.count&&i(R,{id:"airm_geo_fffff486",args:{0:e.name,1:m.formatNumber("integer",e.count)},messages:"{0} ({1})"})||s&&i(N,{width:"10%",height:f?"22px":"29px"})||null})}),f?i(ei,{sourceControl:t,subAlbumControl:r,sortControl:n,onReset:d,onClose:c}):i(ee,{sourceControl:t,subAlbumControl:r,sortControl:n,fetching:o})]})},eN=({data:{id:e,uploadDate:t,source:a,caption:r,type:n,review:s,supplierCategory:o,userProfile:d},onClick:c,sizeHint:f,positionInContext:u})=>{var m,b=E(),{localize:h}=L(),_=t?b.formatDate("date_medium_month_year",new Date(t)):"";return m="OWNER"===o?h.string("Dirección","Photoviewer_mgmtFilter"):"STAFF"===o?h.string("Foto encargada por Tripadvisor","gallery_image_tripadvisor_provider"):d?.displayName,l("button",{className:"vKCIi w B- _S",type:"button",onClick:()=>c?.(u,e),"data-testid":"image_button_container",children:[i("div",{className:"BtGfv",children:i(C,{source:a,sizeHint:f,height:"100%",alt:r||"",lazy:!1})}),l("div",{className:"TQwng Y",children:[i("div",{className:"HGiFx s _U l"}),l("div",{className:"HqAGE f e Q1 s l Pi PW Pv PI Wh w z _a","data-testid":"information_overlay",children:[m&&l(A,{atlasVariant:"fixed-label-20",color:"primaryFixed",children:[i("span",{children:m}),_&&l("span",{children:["\xa0•\xa0",_]})]}),(s?.rating||s?.rating===0)&&i(Y,{rating:s.rating})]})]}),i(H,{type:n})]})},eR={gridContainer:"qgoXE A w",isHero:"PfqCp",skeleton:"OduDW w Gz"},eE=(e,t)=>`${e?"fetching":"fetched"}}_${t}}`,eL=({handleViewed:e,scrollableRef:t,isHero:l,medias:a})=>{var r=U($(t=>{t&&a.some(e=>!e.node)&&e()},250),500,0,t);return a.every(e=>e&&!e.fetching&&!e.node)?null:i("div",{className:S(eR.gridContainer,{[eR.isHero]:l}),ref:r,"data-testid":"mosaic_layout",children:a.map(({fetching:e,node:t,position:l})=>e||t?t||i("div",{className:eR.skeleton,"data-testid":"skeleton"},eE(e,l)):null)})},eM=(e,t,l)=>l&&0===e?[0]:[0,1,2].reduce((i,a)=>{var r=3*e+a-(l?2:0);return r<t?[...i,r]:i},[]),eI=(e,t,l)=>{var i="MOBILE"===u(),[a,r]=s(10),n=i?Math.ceil((e.totalMediasCount-1)/3)+1:Math.ceil(e.totalMediasCount/3),f=c(()=>Array.from({length:n},(t,l)=>({viewed:!1,medias:eM(l,e.totalMediasCount,i).map(e=>({position:e,node:null,fetching:!0}))})),[i,n,e]),[m,b]=s(f);d(()=>{b(f)},[f]);var h=o(e=>{b(t=>{if(!t[e])return t;var i=[...t],{medias:a}=i[e];return i[e]={...t[e],viewed:!0,medias:a.map(e=>{var t=l(e.position)||{...e,fetching:!1};return{...e,...t}})},i})},[l]);return d(()=>{t||m.forEach((e,t)=>{e.viewed&&e.medias.some(e=>!e.node&&e.fetching)&&h(t)})},[t,h,m]),{lastMosaicIndexToRender:a+20,mosaics:m,getViewedHandler:e=>()=>{r(t=>Math.max(t,e)),h(e)},isMobile:i}},ek=e=>e.map(e=>`${e.position}_${e.fetching?"fetching":"fetched"}`).join("_"),ex=({mediaRendererWithStatus:e,fetching:t,galleryAlbumParams:l,scrollableRef:a})=>{var{lastMosaicIndexToRender:r,mosaics:n,getViewedHandler:s,isMobile:o}=en(l,t,e);return i("div",{className:"w",children:n.map((e,t)=>t>=r?null:i(er,{scrollableRef:a,handleViewed:s(t),isHero:o&&0===t,medias:e.medias},ek(e.medias)))})},eO={viewer:"hgUDK l _Z Gi",footerOffer:"TObvI s Gi",header:"XXwWp Gi",albumSectionContainer:"KydbY Gi z",content:"TIhWB",gallery:"eRCDo Gi",albumSection:"kIHZa",placementAds:"ILNVu",main:"lYaEG",albumSectionAd:"kcSdQ"},eW=({albums:e=[],subAlbums:t,location:n,selectedAlbumSpecifier:s,controlsSelected:o,fetching:h,hideControls:S,adSlot:C,headerOfferSlot:A,footerOfferSlot:N,getMediaData:R,actionHandler:E,saveButton:L})=>{var{locationFetching:M,albumsFetching:I,subAlbumsFetching:k,pageFetching:x}=h,O=e=>{null!=e&&E?.({type:y.galleryItemClicked,mediaOffsetIndex:e})},W="MOBILE"===u(),T="TABLET"===u(),{subAlbumSpecifier:B,subAlbumSpecifierInModal:G,albumSource:F,albumSourceInModal:P,sortStrategy:V}=o||{},D=V===v.recency?p.recency:p.featured,z=r(null),j=r(null),{subAlbumOptions:Y,sourceOptions:H,sortOptions:$}=K({subAlbums:t,albumSource:P,albumSpecifier:s,subAlbumSpecifier:G}),U=c(()=>e.find(e=>b(e.albumSpecifier,s)),[e,s]),Z=c(()=>H.find(e=>e.value===P)||H[0],[H,P]),Q=c(()=>Z?.label.count||U?.count||0,[U?.count,Z?.label.count]),{getAdElement:J,getAdjustedImageOffset:ee,totalNumberOfAds:et}=m(Q,(e,t)=>{E?.({type:y.adInGalleryClick,mediaId:e,indexPosition:t})},(e,t)=>{E?.({type:y.adInGalleryView,mediaId:e,indexPosition:t})}),{rating:el,count:ei}=n?.reviewSummary||{},er=(el||0===el)&&!!ei,en={options:c(()=>{if(W)return Y;var e=Y?.find(e=>b(e.value,B));return e?[e,...Y.filter(t=>t!==e)]:Y},[W,Y,B]),selected:G||g("aws-proxy"===s.type),onSelect:(e,t)=>{E?.({type:"FILTER_MODAL"===t?y.subAlbumSelectedInModal:y.subAlbumSelected,subAlbumSpecifier:e})}},es={options:H,selected:Z?.value||_.allUnrestricted,onSelect:(e,t)=>{E?.({type:"FILTER_MODAL"===t?y.sourceAlbumSelectedInModal:y.sourceAlbumSelected,albumSource:e})}},eo=Q>1?{options:$,selected:D,onSelect:e=>{E?.({type:y.sortSelected,sort:e===p.recency?v.recency:v.featured})}}:null,ed=c(()=>({totalMediasCount:Q+et,albumSpecifier:s,subAlbumSpecifier:B,albumSource:F,sort:D}),[Q,s,B,F,D,et]);return d(()=>{z.current&&z.current.scrollTo?.({top:0})},[Q,s,B,F,D]),l("div",{className:`${eO.viewer}`,ref:j,children:[i("div",{className:eO.header,"data-testid":"header",children:i(q,{titleText:n?.name,secondaryTitleContent:l(a,{children:[er&&i(f,{rating:el,reviewCount:ei}),L]}),secondaryHeaderContent:A,onCloseClick:()=>E?.({type:y.close,component:w.GALLERY_VIEWER}),fetching:M})}),l("div",{className:eO.main,children:[l("div",{className:eO.albumSectionContainer,children:[i("div",{className:`${eO.albumSection} ${C?eO.albumSectionAd:""}`,"data-testid":"album_section",children:i(X,{albums:e,fetching:h.albumsFetching,selectedAlbumSpecifier:s,onAlbumSelected:e=>E?.({type:y.albumSelectedFromGallery,albumSpecifier:e})})}),C&&i("div",{className:eO.placementAds,children:C})]}),l("div",{className:eO.content,children:[!S&&i("div",{"data-testid":"controls_section",children:i(ea,{headerLabel:{name:U?.title||"",count:U?.count||0},subAlbumControl:en,sourceControl:es,sortControl:eo,albumsFetching:I,subAlbumsFetching:k,onReset:()=>{E?.({type:y.resetFilter,subAlbumSpecifier:Y[0]?.value??g("aws-proxy"===s.type),albumSource:H[0]?.value||_.allUnrestricted})},onClose:e=>{"FILTER_MODAL"===e&&E?.({type:y.resetFilterInModal})}})}),i("div",{className:eO.gallery,"data-testid":"tile_gallery",ref:z,children:i(ex,{scrollableRef:W||T?j:z,galleryAlbumParams:ed,fetching:x,mediaRendererWithStatus:e=>{var t=J(e);if(t)return t;var l=ee(e),a=R?.(l);return a?.data?.id?{node:i(eN,{data:a.data,sizeHint:{desktop:"500px",tablet:"50vw",mobile:"50vw"},positionInContext:l,onClick:O},a.data.id),fetching:a.fetching}:{node:null,fetching:a?.fetching}}})})]})]}),N&&W&&i("div",{className:eO.footerOffer,children:N})]})};return[()=>{Z=es,Q=eo,X=ec,J=em,ee=ep,et=eg,el=ey,ei=eC,ea=eA,er=eL,en=eI,e("default",eW)},[e=>(l=e.jsxs,i=e.jsx,a=e.Fragment),e=>(r=e.useRef,n=e.createRef,s=e.useState,o=e.useCallback,d=e.useEffect,c=e.useMemo),e=>f=e.BubbleRating,e=>u=e.useViewportCategory,e=>m=e.useAdsTest,e=>(b=e.isAlbumSpecifierEqual,h=e.buildAlbumSpecifierKey,_=e.mediaSources,v=e.dataStrategySort,p=e.mediaSorts,g=e.getFallbackAlbumSpecifier,y=e.MG_ACTIONS,w=e.COMPONENT_NAME),e=>S=e.default,e=>C=e.default,e=>A=e.default,e=>N=e.Skeleton,e=>(R=e.default,E=e.useIntlFormatter,L=e.useLocalize),e=>M=e.default,e=>I=e.DropdownMenu,e=>(k=e.TabBar,x=e.Tab),e=>(O=e.default,W=e.ButtonBorderless),e=>T=e.default,e=>B=e.default,e=>G=e.ChipButton,e=>F=e.default,e=>P=e.default,e=>V=e.default,e=>D=e.Modal,e=>(z=e.RadioGroup,j=e.RadioButton),e=>Y=e.BubbleRating,e=>H=e.default,e=>q=e.default,e=>$=e.useDebouncedCallback,e=>U=e.useVisibleEffect,e=>K=e.getControlsOptions]]},["21h32l","o4yt4q","trf9tg","ys6v1o","b6pt8h","2xdx75","fkji80","34bu7w","essqvy","voa3hw","7thqz4","covaqn","ntn269","227h6c","jppfwt","i0z8n1","4ilds0","mqfj4j","d6vj30","la678j","8e77a5","i3sz5h","frf6ac","bkeq24","aefqpw","fsp8dm","dsbyen","3btuy0","umcxmq"]]);
